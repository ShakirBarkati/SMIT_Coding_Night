<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./output.css" rel="stylesheet" />

    <title>Meta social - Modern Login</title>
  </head>
  <body>
    <section class="text-gray-600 body-font relative">
      <div class="container px-5 py-24 mx-auto flex">
        <div
          class="bg-white rounded-lg p-8 flex flex-col w-full mt-10 md:mt-0 relative z-10 shadow-md"
        >
          <h2 class="text-gray-900 text-lg mb-1 font-medium title-font">
            Login
          </h2>
          <form action="" method="post" id="form">
            <div class="relative mb-4">
              <label for="email" class="leading-7 text-sm text-gray-600"
                >Email</label
              >
              <input
                type="email"
                id="email"
                name="email"
                class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
              />
            </div>
            <div class="relative mb-4">
              <label for="password" class="leading-7 text-sm text-gray-600"
                >Password</label
              >
              <input
                type="password"
                id="password"
                name="password"
                class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
              />
            </div>

            <button
              class="text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg"
            >
              Button
            </button>
          </form>
          <p class="text-xs text-gray-500 mt-3">
            you don't have an account? <a href="signUp.html">Sign Up</a>
          </p>
        </div>
      </div>
    </section>
  </body>
  <script>
    let userEmailEl = document.querySelector("#email");
    let userPasswordEl = document.querySelector("#password");
    let formEl = document.querySelector("#form");

    formEl.addEventListener("submit", (e) => {
      e.preventDefault();

      let userEmailVal = userEmailEl.value.trim();
      let userPasswordVal = userPasswordEl.value.trim();

      // 1️⃣ Get existing users from localStorage
      let users = [];
      if (localStorage.getItem("users")) {
        users = JSON.parse(localStorage.getItem("users"));
      }

      // 2️⃣ Check if username or email already exists
      let exists = users.find(
        (user) =>
          user.email === userEmailVal && user.password === userPasswordVal
      );

      if (exists) {
        alert("yes! you login successfully");
        document.cookie = `userName=${exists.name}; path=/; max-age=86400`;
        document.cookie = `userEmail=${exists.email}; path=/; max-age=86400`;

        window.location.href = "index.html";
        return; // Stop execution, user not added
      } else {
        alert("User not found! please sign up first");
      }
    });
  </script>
</html>
